# list.c 测试用例创建规划

## 测试用例列表

基于分支覆盖分析,以下是我们需要创建的测试用例:

### 1. seed_list_minimal.raw
**目的**: 覆盖 `bftpd_list_add` 分支2(空列表添加) 和 `bftpd_list_del` 分支1(删除第一个)
**策略**: 极短连接,快速触发添加和删除

### 2. seed_list_single.raw  
**目的**: 覆盖基本添加和删除流程
**策略**: 包含少量命令的基本连接

### 3. seed_list_long.raw
**目的**: 保持连接时间,允许其他连接建立
**策略**: 包含多个命令的长连接

### 4. seed_list_complex.raw
**目的**: 触发各种内部操作,增加子进程处理时间
**策略**: 包含目录操作和数据传输的复杂序列

### 5. seed_list_data.raw
**目的**: 触发数据连接,增加子进程复杂度
**策略**: 包含数据传输相关命令

## 执行顺序建议

为了最大化分支覆盖,建议按以下顺序执行:

1. **第一轮**: 快速连续执行多个短连接用例
   - `seed_list_minimal.raw` → 添加第一个元素(分支2)
   - 快速执行 `seed_list_single.raw` → 添加第二个元素(分支1)
   - 快速执行 `seed_list_long.raw` → 添加第三个元素(分支1.1,需要遍历)

2. **第二轮**: 观察删除顺序
   - 短连接快速退出 → 触发删除第一个元素(分支1)
   - 中间连接退出 → 触发删除中间元素(分支2)
   - 长连接最后退出 → 触发删除末尾元素(分支2)

## 覆盖验证

使用 gcov 或其他覆盖率工具验证:
1. 每个分支的覆盖状态
2. 未覆盖的分支
3. 需要补充的测试用例
